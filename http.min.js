/*! lil-http - v0.1 - MIT License - https://github.com/lil-js/http */
(function(e,t){if(typeof define==="function"&&define.amd){define(["exports"],t)}else if(typeof exports==="object"){t(exports);if(typeof module==="object"&&module!==null){module.exports=exports=exports.http}}else{t(e.lil=e.lil||{})}})(this,function(e){"use strict";var t="0.1.8";var n=Object.prototype.toString;var r=Array.prototype.slice;var o=Object.prototype.hasOwnProperty;var a=location.origin;var u=/^(http[s]?:\/\/[a-z0-9\-\.\:]+)[\/]?/i;var i=/application\/json/;var s=typeof XDomainRequest!=="undefined";var f=function(){};var l={method:"GET",timeout:30*1e3,auth:null,headers:null,async:true,withCredentials:false,responseType:"text"};function p(e){return e&&n.call(e)==="[object Object]"||false}function c(e){var t,n,a,u,i=r.call(arguments).slice(1);for(t=0,n=i.length;t<n;t+=1){u=i[t];for(a in u)if(o.call(u,a))e[a]=u[a]}return e}function d(e,t){if(p(t)){t["Content-Type"]=t["Content-Type"]||A.defaultContent;for(var n in t){e.setRequestHeader(n,t[n])}}}function v(e){var t={},n=e.getAllResponseHeaders().split("\n");n.forEach(function(e){if(e){e=e.split(":");t[e[0].trim()]=(e[1]||"").trim()}});return t}function y(e){return i.test(e.getResponseHeader("Content-Type"))}function m(e){return Object.getOwnPropertyNames(e).filter(function(t){return e[t]!==undefined}).map(function(t){var n=e[t]===null?"":e[t];return encodeURIComponent(t)+(n?"="+encodeURIComponent(n):"")}).join("&").replace(/%20/g,"+")}function h(e){var t;if(e.responseType==="text"){t=e.responseText;if(y(e)&&t)t=JSON.parse(t)}else{t=e.response}return t}function g(e){return{xhr:e,status:e.status,data:h(e),headers:v(e)}}function T(e,t){var n=new Error(t.message);c(n,g(e));n.error=t;n.stack=t.stack;return n}function C(e,t){var n=false;return function(r){if(!n){t(T(e,r),null);n=true}}}function x(e,t){return function(){if(e.readyState===4){if(e.status>=200&&e.status<400){t(null,g(e))}else{t(g(e),null)}}}}function E(e){var t=e.match(u);return t&&t[1]===a}function O(e){var t=e.url;if(p(e.params)){t+="?"+m(e.params)}return t}function b(e){var t=null;var n=(e.method||"GET").toUpperCase();var r=e.auth||{};var o=O(e);if(s&&E(o)){t=new XDomainRequest}else{t=new XMLHttpRequest}t.open(n,o,e.async,r.user,r.password);t.withCredentials=e.withCredentials;t.responseType=e.responseType;t.timeout=e.timeout;d(t,e.headers);return t}function j(e,t){return function(e){if(evt.lengthComputable){t(e,evt.loaded/evt.total)}else{t(e)}}}function w(e,t,n){var r=b(e);var o=p(e.data)||Array.isArray(e.data)?JSON.stringify(e.data):e.data;var a=C(r,t);r.onload=x(r,t);r.onerror=a;r.ontimeout=a;r.onabort=a;if(typeof n==="function")r.onprogress=j(r,n);try{r.send(o)}catch(u){a(u)}return{xhr:r,config:e}}function R(e){return function(t,n,o,a){var u,i,s=null;var d=c({},l,{method:e});var v=r.call(arguments);for(u=0,i=v.length;u<i;u+=1){s=v[u];if(typeof s==="function"){o=s;if(o!==s)a=s}else if(p(s)){c(d,s)}else if(typeof s==="string"&&!d.url){d.url=s}}return w(d,o||f,a)}}function A(e,t,n,r){return R("GET").apply(null,arguments)}A.VERSION=t;A.defaults=l;A.defaultContent="text/plain";A.get=R("GET");A.post=R("POST");A.put=R("PUT");A.del=R("DELETE");A.patch=R("PATCH");A.head=R("HEAD");return e.http=A});
//# sourceMappingURL=http.min.js.map