/*! lil-http - v0.1.15 - MIT License - https://github.com/lil-js/http */
(function(t,e){if(typeof define==="function"&&define.amd){define(["exports"],e)}else if(typeof exports==="object"){e(exports);if(typeof module==="object"&&module!==null){module.exports=exports=exports.http}}else{e(t.lil=t.lil||{})}})(this,function(t){"use strict";var e="0.1.15";var n=Object.prototype.toString;var r=Array.prototype.slice;var o=Object.prototype.hasOwnProperty;var a=typeof Function.prototype.bind==="function";var u=location.origin;var i=/^(http[s]?:\/\/[a-z0-9\-\.\:]+)[\/]?/i;var s=/application\/json/;var f=typeof XDomainRequest!=="undefined";var l=function(){};var c={method:"GET",timeout:30*1e3,auth:null,data:null,headers:null,withCredentials:false,responseType:"text"};function p(t){return t&&n.call(t)==="[object Object]"||false}function d(t){var e,n,a,u,i=r.call(arguments).slice(1);for(e=0,n=i.length;e<n;e+=1){u=i[e];for(a in u)if(o.call(u,a))t[a]=u[a]}return t}function y(t){var e=false;return function(){if(e===false){e=true;t.apply(null,arguments)}}}function v(t,e){if(p(e)){e["Content-Type"]=e["Content-Type"]||U.defaultContent;for(var n in e)if(o.call(e,n)){t.setRequestHeader(n,e[n])}}}function h(t){var e={},n=t.getAllResponseHeaders().trim().split("\n");n.forEach(function(t){var n=t.trim().split(":");var r=n.shift().trim();var o=n.join(":").trim();e[r]=o});return e}function m(t){return s.test(t.getResponseHeader("Content-Type"))}function g(t){return Object.getOwnPropertyNames(t).filter(function(e){return t[e]!==undefined}).map(function(e){var n=t[e]===null?"":t[e];return encodeURIComponent(e)+(n?"="+encodeURIComponent(n):"")}).join("&").replace(/%20/g,"+")}function T(t){var e=null;if(t.responseType==="text"){e=t.responseText;if(m(t)&&e)e=JSON.parse(e)}else{e=t.response}return e}function x(t){var e={xhr:t,status:t.status,statusText:t.statusText,data:null,headers:{}};if(t.readyState===4){e.data=T(t);e.headers=h(t)}return e}function C(t,e){var n=x(t);n.error=e;if(e.stack)n.stack=e.stack;return n}function j(t){t.onreadystatechange=t.onerror=t.ontimeout=null}function O(t){var e=t.status=t.status===1223?204:t.status;return e>=200&&e<300||e===304}function b(t,e){return y(function(n){e(C(t,n),null)})}function E(t,e,n){return function(t){if(e.readyState===4){j(e);if(O(e)){n(null,x(e))}else{b(e,n)(t)}}}}function R(t){var e=t.match(i);return e&&e[1]===u}function w(t){var e=t.url;if(p(t.params)){e+=(e.indexOf("?")===-1?"?":"&")+g(t.params)}return e}function S(t){if(f&&R(t)){return new XDomainRequest}else{return new XMLHttpRequest}}function H(t){var e=(t.method||"GET").toUpperCase();var n=t.auth;var r=w(t);var o=S(r);if(n){o.open(e,r,true,n.user,n.password)}else{o.open(e,r)}o.withCredentials=t.withCredentials;o.responseType=t.responseType;o.timeout=t.timeout;v(o,t.headers);return o}function A(t,e){return function(t){if(t.lengthComputable){e(t,t.loaded/t.total)}else{e(t)}}}function q(t){return t&&p(t.headers)&&(t.headers["content-type"]||t.headers["Content-Type"])||false}function P(t,e){var n=e.data;if(p(e.data)||Array.isArray(e.data)){if(q(e)===false){t.setRequestHeader("Content-Type","application/json")}n=JSON.stringify(e.data)}return n}function D(t,e){return function(){clearTimeout(e);t.apply(null,arguments)}}function G(t,e,n){var r=H(t);var o=P(r,t);var u=b(r,e);if(a){r.ontimeout=u}else{var i=setTimeout(function f(){if(r.readyState!==4){r.abort()}},t.timeout);e=D(e,i);u=b(r,e)}r.onreadystatechange=E(t,r,e);r.onerror=u;if(typeof n==="function"){r.onprogress=A(r,n)}try{r.send(o?o:null)}catch(s){u(s)}return{xhr:r,config:t}}function N(t){return function(e,n,o,a){var u,i,s=null;var f=d({},c,{method:t});var y=r.call(arguments);for(u=0,i=y.length;u<i;u+=1){s=y[u];if(typeof s==="function"){if(y.length===u+1&&typeof y[u-1]==="function"){a=s}else{o=s}}else if(p(s)){d(f,s)}else if(typeof s==="string"&&!f.url){f.url=s}}return G(f,o||l,a)}}function U(t,e,n,r){return N("GET").apply(null,arguments)}U.VERSION=e;U.defaults=c;U.defaultContent="text/plain";U.get=N("GET");U.post=N("POST");U.put=N("PUT");U.del=N("DELETE");U.patch=N("PATCH");U.head=N("HEAD");return t.http=U});
//# sourceMappingURL=http://cdn.rawgit.com/lil-js/http/0.1.15/http.min.js.map